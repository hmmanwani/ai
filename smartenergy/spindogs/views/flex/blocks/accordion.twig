{# 
Accordion Flex block

Fields:
 -- items: Repeater
   -- heading: Text
   -- active: True/False
   -- content: WYSIWYG
 -- margin_top: Select
#}

{# Set a random key so the block can be used multiple times per page, else the IDs will not be unique #}
{% set key = random() %}
<div class="flexibleblocks-block" style='margin-top:{{ block.margin_top }};'>
    <section class="accordionblock">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    {% for item in block.items %}
                        <div class="accordion Accordion">
                            <button class="accordion-head {% if item.active %}__active{% endif %} AccordionTrigger" id="accordion-button-{{ key ~ '-' ~ loop.index }}" aria-controls="accordion-panel-{{ key ~ '-' ~ loop.index }}" aria-expanded="false">
                                {{ item.heading|e('wp_kses_post') }}
                            </button>
                            <div class="accordion-content AccordionContent" id="accordion-panel-{{ key ~ '-' ~ loop.index }}" aria-labelledby="accordion-button-{{ key ~ '-' ~ loop.index }}" aria-hidden="true" style="display: none;">
                                <p>
                                    {{ item.content|e('wp_kses_post') }}
                                </p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
</div>
<!-- flexible block -->
